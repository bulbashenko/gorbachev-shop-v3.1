{% extends "notifications/email/base.html" %}

{% block title %}Order Confirmation{% endblock %}

{% block content %}
<h2>Thank You for Your Order!</h2>
<p>Hi {{ user.first_name }},</p>
<p>We're excited to let you know that we've received your order. Here are your order details:</p>

<div class="order-details">
    <h3>Order Summary</h3>
    <p><strong>Order Number:</strong> {{ order.order_number }}</p>
    <p><strong>Order Date:</strong> {{ order.created_at|date:"F j, Y" }}</p>
    <p><strong>Shipping Method:</strong> {{ order.get_shipping_method_display }}</p>
</div>

<h3>Order Items:</h3>
<table class="order-items">
    <thead>
        <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
        {% for item in order.items.all %}
        <tr>
            <td>
                {{ item.variant.product.name }}
                <div class="item-variant">{{ item.variant.size.name }} - {{ item.variant.color.name }}</div>
            </td>
            <td>{{ item.quantity }}</td>
            <td>${{ item.total }}</td>
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2" style="text-align: right;"><strong>Subtotal:</strong></td>
            <td>${{ order.subtotal }}</td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: right;"><strong>Shipping:</strong></td>
            <td>${{ order.shipping_cost }}</td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: right;"><strong>Total:</strong></td>
            <td><strong>${{ order.total }}</strong></td>
        </tr>
    </tfoot>
</table>

<div class="order-details">
    <h3>Shipping Address</h3>
    <p>{{ order.shipping_address.full_name }}</p>
    <p>{{ order.shipping_address.street_address }}</p>
    {% if order.shipping_address.apartment %}
    <p>{{ order.shipping_address.apartment }}</p>
    {% endif %}
    <p>{{ order.shipping_address.city }}, {{ order.shipping_address.postal_code }}</p>
    <p>{{ order.shipping_address.country }}</p>
</div>

<p>We'll notify you when your order has been shipped. You can also track your order status by visiting our website.</p>

<div style="text-align: center;">
    <a href="{{ site_url }}/orders/{{ order.order_number }}" class="button">Track Your Order</a>
</div>
{% endblock %}